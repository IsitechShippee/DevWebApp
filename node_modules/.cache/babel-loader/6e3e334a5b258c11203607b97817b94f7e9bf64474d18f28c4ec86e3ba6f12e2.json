{"ast":null,"code":"var _jsxFileName = \"C:\\\\Dossier\\\\Isitech\\\\Shippee\\\\APP WEB\\\\shippee-web\\\\src\\\\Stores\\\\UserInfoContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useReducer } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const myAppContextUserInfo = /*#__PURE__*/createContext({\n  userInfo: {},\n  dispatchUserInfo: action => {}\n});\nexport const MyAppContextUserInfoProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const userInfoReducer = (state, action) => {\n    console.log('UserInfoContext : ' + action.type + ' - Payload : ', action.payload);\n    switch (action.type) {\n      case 'CONNECT':\n        return action.payload;\n      case 'LOVE':\n        let newState = state;\n\n        // On regarde si c'est un ajout au favoris ou un retrait\n        let isAdd = true;\n        newState.favorites.forEach(element => {\n          if (element.id === action.payload.id) {\n            isAdd = false;\n          }\n        });\n\n        // On parcourt les annonces pour ajouter a l'annonce en question le favori\n        newState.loc_announcements.forEach(element => {\n          if (element.id === action.payload.id) {\n            element.favorite = isAdd;\n          }\n        });\n        newState.recent_announcements.forEach(element => {\n          if (element.id === action.payload.id) {\n            element.favorite = isAdd;\n            // console.log(element.id + ' : ' + element.favorite)\n          }\n        });\n\n        newState.select_announcements.forEach(element => {\n          if (element.id === action.payload.id) {\n            element.favorite = isAdd;\n            // console.log(element.id + ' : ' + element.favorite)\n          }\n        });\n\n        // On ajoute ou retire l'annonce des favoris*\n        if (isAdd) {\n          newState.favorites.push(action.payload);\n        } else {\n          newState.favorites = newState.favorites.filter(item => item.id !== action.payload.id);\n        }\n        return newState;\n      default:\n        return state;\n    }\n  };\n  const [userInfo, dispatchUserInfo] = useReducer(userInfoReducer, null);\n  return /*#__PURE__*/_jsxDEV(myAppContextUserInfo.Provider, {\n    value: {\n      userInfo: userInfo,\n      dispatchUserInfo: dispatchUserInfo\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n};\n_s(MyAppContextUserInfoProvider, \"QW8ooWmAh0SMYxcBvf5sganveuQ=\");\n_c = MyAppContextUserInfoProvider;\nvar _c;\n$RefreshReg$(_c, \"MyAppContextUserInfoProvider\");","map":{"version":3,"names":["React","createContext","useReducer","myAppContextUserInfo","userInfo","dispatchUserInfo","action","MyAppContextUserInfoProvider","children","userInfoReducer","state","console","log","type","payload","newState","isAdd","favorites","forEach","element","id","loc_announcements","favorite","recent_announcements","select_announcements","push","filter","item"],"sources":["C:/Dossier/Isitech/Shippee/APP WEB/shippee-web/src/Stores/UserInfoContext.js"],"sourcesContent":["import React, { createContext, useReducer } from \"react\";\r\n\r\nexport const myAppContextUserInfo = createContext({\r\n    userInfo: {},\r\n    dispatchUserInfo: (action) => { },\r\n})\r\n\r\nexport const MyAppContextUserInfoProvider = ({ children }) => {\r\n\r\n    const userInfoReducer = (state, action) => {\r\n        console.log('UserInfoContext : ' + action.type + ' - Payload : ', action.payload)\r\n        switch (action.type) {\r\n            case 'CONNECT':\r\n                return action.payload\r\n            case 'LOVE':\r\n                let newState = state\r\n\r\n                // On regarde si c'est un ajout au favoris ou un retrait\r\n                let isAdd = true;\r\n                newState.favorites.forEach(element => {\r\n                    if (element.id === action.payload.id) {\r\n                        isAdd = false\r\n                    }\r\n                })\r\n\r\n                // On parcourt les annonces pour ajouter a l'annonce en question le favori\r\n                newState.loc_announcements.forEach(element => {\r\n                    if (element.id === action.payload.id) {\r\n                        element.favorite = isAdd\r\n                    }\r\n                })\r\n\r\n                newState.recent_announcements.forEach(element => {\r\n                    if (element.id === action.payload.id) {\r\n                        element.favorite = isAdd\r\n                        // console.log(element.id + ' : ' + element.favorite)\r\n                    }\r\n                })\r\n\r\n                newState.select_announcements.forEach(element => {\r\n                    if (element.id === action.payload.id) {\r\n                        element.favorite = isAdd\r\n                        // console.log(element.id + ' : ' + element.favorite)\r\n                    }\r\n                })\r\n\r\n                // On ajoute ou retire l'annonce des favoris*\r\n                if (isAdd) {\r\n                    newState.favorites.push(action.payload)\r\n                } else {\r\n                    newState.favorites = newState.favorites.filter((item) => item.id !== action.payload.id)\r\n                }\r\n\r\n                return newState\r\n            default:\r\n                return state\r\n        }\r\n    }\r\n\r\n    const [userInfo, dispatchUserInfo] = useReducer(userInfoReducer, null)\r\n\r\n    return (\r\n        <myAppContextUserInfo.Provider value={{\r\n            userInfo: userInfo,\r\n            dispatchUserInfo: dispatchUserInfo\r\n        }}>\r\n            {children}\r\n        </myAppContextUserInfo.Provider>\r\n    )\r\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,QAAQ,OAAO;AAAC;AAEzD,OAAO,MAAMC,oBAAoB,gBAAGF,aAAa,CAAC;EAC9CG,QAAQ,EAAE,CAAC,CAAC;EACZC,gBAAgB,EAAGC,MAAM,IAAK,CAAE;AACpC,CAAC,CAAC;AAEF,OAAO,MAAMC,4BAA4B,GAAG,QAAkB;EAAA;EAAA,IAAjB;IAAEC;EAAS,CAAC;EAErD,MAAMC,eAAe,GAAG,CAACC,KAAK,EAAEJ,MAAM,KAAK;IACvCK,OAAO,CAACC,GAAG,CAAC,oBAAoB,GAAGN,MAAM,CAACO,IAAI,GAAG,eAAe,EAAEP,MAAM,CAACQ,OAAO,CAAC;IACjF,QAAQR,MAAM,CAACO,IAAI;MACf,KAAK,SAAS;QACV,OAAOP,MAAM,CAACQ,OAAO;MACzB,KAAK,MAAM;QACP,IAAIC,QAAQ,GAAGL,KAAK;;QAEpB;QACA,IAAIM,KAAK,GAAG,IAAI;QAChBD,QAAQ,CAACE,SAAS,CAACC,OAAO,CAACC,OAAO,IAAI;UAClC,IAAIA,OAAO,CAACC,EAAE,KAAKd,MAAM,CAACQ,OAAO,CAACM,EAAE,EAAE;YAClCJ,KAAK,GAAG,KAAK;UACjB;QACJ,CAAC,CAAC;;QAEF;QACAD,QAAQ,CAACM,iBAAiB,CAACH,OAAO,CAACC,OAAO,IAAI;UAC1C,IAAIA,OAAO,CAACC,EAAE,KAAKd,MAAM,CAACQ,OAAO,CAACM,EAAE,EAAE;YAClCD,OAAO,CAACG,QAAQ,GAAGN,KAAK;UAC5B;QACJ,CAAC,CAAC;QAEFD,QAAQ,CAACQ,oBAAoB,CAACL,OAAO,CAACC,OAAO,IAAI;UAC7C,IAAIA,OAAO,CAACC,EAAE,KAAKd,MAAM,CAACQ,OAAO,CAACM,EAAE,EAAE;YAClCD,OAAO,CAACG,QAAQ,GAAGN,KAAK;YACxB;UACJ;QACJ,CAAC,CAAC;;QAEFD,QAAQ,CAACS,oBAAoB,CAACN,OAAO,CAACC,OAAO,IAAI;UAC7C,IAAIA,OAAO,CAACC,EAAE,KAAKd,MAAM,CAACQ,OAAO,CAACM,EAAE,EAAE;YAClCD,OAAO,CAACG,QAAQ,GAAGN,KAAK;YACxB;UACJ;QACJ,CAAC,CAAC;;QAEF;QACA,IAAIA,KAAK,EAAE;UACPD,QAAQ,CAACE,SAAS,CAACQ,IAAI,CAACnB,MAAM,CAACQ,OAAO,CAAC;QAC3C,CAAC,MAAM;UACHC,QAAQ,CAACE,SAAS,GAAGF,QAAQ,CAACE,SAAS,CAACS,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACP,EAAE,KAAKd,MAAM,CAACQ,OAAO,CAACM,EAAE,CAAC;QAC3F;QAEA,OAAOL,QAAQ;MACnB;QACI,OAAOL,KAAK;IAAA;EAExB,CAAC;EAED,MAAM,CAACN,QAAQ,EAAEC,gBAAgB,CAAC,GAAGH,UAAU,CAACO,eAAe,EAAE,IAAI,CAAC;EAEtE,oBACI,QAAC,oBAAoB,CAAC,QAAQ;IAAC,KAAK,EAAE;MAClCL,QAAQ,EAAEA,QAAQ;MAClBC,gBAAgB,EAAEA;IACtB,CAAE;IAAA,UACGG;EAAQ;IAAA;IAAA;IAAA;EAAA,QACmB;AAExC,CAAC;AAAA,GA9DYD,4BAA4B;AAAA,KAA5BA,4BAA4B;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}