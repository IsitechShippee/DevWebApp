{"ast":null,"code":"var _jsxFileName = \"C:\\\\Dossier\\\\Isitech\\\\Shippee\\\\APP WEB\\\\shippee-web\\\\src\\\\Stores\\\\UserInfoContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useReducer } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const myAppContextUserInfo = /*#__PURE__*/createContext({\n  userInfo: {},\n  dispatchUserInfo: action => {}\n});\nexport const MyAppContextUserInfoProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const userInfoReducer = (state, action) => {\n    console.log('Demande : ' + action.type + ' - Payload : ', action.payload);\n    let json = '';\n    switch (action.type) {\n      case 'CONNECT':\n        return action.payload;\n      case 'LOVE':\n        let newState = state;\n        json = {\n          id_user: 13,\n          id_annoucement: action.payload.id\n        };\n\n        // On regarde si c'est un ajout au favoris ou un retrait\n        let isAdd = true;\n        newState.favorites.forEach(element => {\n          if (element.id === action.payload.id) {\n            isAdd = false;\n          }\n        });\n\n        // console.log('isAdd : ' + isAdd)\n        // console.log('id : ' + action.payload.id)\n\n        // On parcourt les annonces pour ajouter a l'annonce en question le favori\n        newState.loc_announcements.forEach(element => {\n          if (element.id === action.payload.id) {\n            element.favorite = isAdd;\n            // console.log(element.id + ' : ' + element.favorite)\n          }\n        });\n\n        newState.rec_announcements.forEach(element => {\n          if (element.id === action.payload.id) {\n            element.favorite = isAdd;\n            // console.log(element.id + ' : ' + element.favorite)\n          }\n        });\n\n        newState.select_announcements.forEach(element => {\n          if (element.id === action.payload.id) {\n            element.favorite = isAdd;\n            // console.log(element.id + ' : ' + element.favorite)\n          }\n        });\n\n        // On ajoute ou retire l'annonce des favoris*\n        if (isAdd) {\n          newState.favorites.push(action.payload);\n        } else {\n          newState.favorites = newState.favorites.filter(item => item.id !== action.payload.id);\n        }\n\n        // console.log('Favorites : ' , newState.favorites)\n\n        axios.post('https://localhost:7061/api/Favorite/favorite', json).then(response => {\n          if (response.status === 200) {\n            return newState;\n          }\n        }).catch(error => {\n          console.log(error);\n        });\n        return state;\n      default:\n        return state;\n    }\n  };\n  const [userInfo, dispatchUserInfo] = useReducer(userInfoReducer, null);\n  return /*#__PURE__*/_jsxDEV(myAppContextUserInfo.Provider, {\n    value: {\n      userInfo: userInfo,\n      dispatchUserInfo: dispatchUserInfo\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 9\n  }, this);\n};\n_s(MyAppContextUserInfoProvider, \"QW8ooWmAh0SMYxcBvf5sganveuQ=\");\n_c = MyAppContextUserInfoProvider;\nvar _c;\n$RefreshReg$(_c, \"MyAppContextUserInfoProvider\");","map":{"version":3,"names":["React","createContext","useReducer","axios","myAppContextUserInfo","userInfo","dispatchUserInfo","action","MyAppContextUserInfoProvider","children","userInfoReducer","state","console","log","type","payload","json","newState","id_user","id_annoucement","id","isAdd","favorites","forEach","element","loc_announcements","favorite","rec_announcements","select_announcements","push","filter","item","post","then","response","status","catch","error"],"sources":["C:/Dossier/Isitech/Shippee/APP WEB/shippee-web/src/Stores/UserInfoContext.js"],"sourcesContent":["import React, { createContext, useReducer } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport const myAppContextUserInfo = createContext({\r\n    userInfo: {},\r\n    dispatchUserInfo: (action) => { },\r\n})\r\n\r\nexport const MyAppContextUserInfoProvider = ({ children }) => {\r\n\r\n    const userInfoReducer = (state, action) => {\r\n        console.log('Demande : ' + action.type + ' - Payload : ', action.payload)\r\n        let json = '';\r\n        switch (action.type) {\r\n            case 'CONNECT':\r\n                return action.payload\r\n            case 'LOVE':\r\n                let newState = state\r\n                json = {\r\n                    id_user: 13,\r\n                    id_annoucement: action.payload.id\r\n                }\r\n\r\n                // On regarde si c'est un ajout au favoris ou un retrait\r\n                let isAdd = true;\r\n                newState.favorites.forEach(element => {\r\n                    if (element.id === action.payload.id) {\r\n                        isAdd = false\r\n                    }\r\n                })\r\n\r\n                // console.log('isAdd : ' + isAdd)\r\n                // console.log('id : ' + action.payload.id)\r\n\r\n                // On parcourt les annonces pour ajouter a l'annonce en question le favori\r\n                newState.loc_announcements.forEach(element => {\r\n                    if (element.id === action.payload.id) {\r\n                        element.favorite = isAdd\r\n                        // console.log(element.id + ' : ' + element.favorite)\r\n                    }\r\n                })\r\n\r\n                newState.rec_announcements.forEach(element => {\r\n                    if (element.id === action.payload.id) {\r\n                        element.favorite = isAdd\r\n                        // console.log(element.id + ' : ' + element.favorite)\r\n                    }\r\n                })\r\n\r\n                newState.select_announcements.forEach(element => {\r\n                    if (element.id === action.payload.id) {\r\n                        element.favorite = isAdd\r\n                        // console.log(element.id + ' : ' + element.favorite)\r\n                    }\r\n                })\r\n\r\n                // On ajoute ou retire l'annonce des favoris*\r\n                if (isAdd) {\r\n                    newState.favorites.push(action.payload)\r\n                } else {\r\n                    newState.favorites = newState.favorites.filter((item) => item.id !== action.payload.id)\r\n                }\r\n\r\n                // console.log('Favorites : ' , newState.favorites)\r\n\r\n                axios.post('https://localhost:7061/api/Favorite/favorite', json)\r\n                    .then((response) => {\r\n                        if (response.status === 200) {\r\n                            return newState\r\n                        }\r\n                    })\r\n                    .catch((error) => { console.log(error) })\r\n                return state\r\n            default:\r\n                return state\r\n        }\r\n    }\r\n\r\n    const [userInfo, dispatchUserInfo] = useReducer(userInfoReducer, null)\r\n\r\n    return (\r\n        <myAppContextUserInfo.Provider value={{\r\n            userInfo: userInfo,\r\n            dispatchUserInfo: dispatchUserInfo\r\n        }}>\r\n            {children}\r\n        </myAppContextUserInfo.Provider>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}